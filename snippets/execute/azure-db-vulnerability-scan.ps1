[CmdletBinding()]
param (
    [Parameter(Mandatory = $true)] [String] $resourceGroupName,
    [Parameter(Mandatory = $true)] [String] $databaseServerName,
    [Parameter(Mandatory = $true)] [String] $databaseName,
    [Parameter(Mandatory = $false)]
    [String] $uniqueIdentifier = (Get-Date -Format "yyyy-MM-dd-HH:mm")
)

Start-AzSqlDatabaseVulnerabilityAssessmentScan `
    -ResourceGroupName $resourceGroupName `
    -ServerName $databaseServerName `
    -DatabaseName $databaseName `
    -ScanId "scan $($uniqueIdentifier)" `
    -AsJob | Wait-Job | Receive-Job